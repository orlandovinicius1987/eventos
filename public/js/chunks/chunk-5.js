(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"5OWj":function(e,t,n){"use strict";var r=n("L2JU");function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a={methods:c({},Object(r.mapActions)("events",["clearForm"])),computed:c({},Object(r.mapState)({events:function(e){return e.events},subEvents:function(e){return e.subEvents},invitations:function(e){return e.invitations}}))}},CtO9:function(e,t,n){"use strict";t.a={methods:{can:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return can.apply(this,arguments)}),cannot:function(){return!this.can.apply(this,arguments)}}}},"N4/z":function(e,t,n){"use strict";var r=n("L2JU");function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a={methods:c({},Object(r.mapActions)("subEvents",["clearForm"])),computed:c({},Object(r.mapState)({addresses:function(e){return e.addresses},events:function(e){return e.events},subEvents:function(e){return e.subEvents}}))}},lMlO:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),c=n.n(r),o=n("jx1L"),s=n("CtO9"),a=n("L2JU");function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={methods:i({},Object(a.mapActions)("receptive",["clearForm"])),computed:i({},Object(a.mapState)({invitations:function(e){return e.invitations},receptive:function(e){return e.receptive},statistics:function(e){return e.receptive.data.statistics}}))},l=n("5OWj"),p=n("N4/z"),v=n("mj45"),m=n("NAv5");function b(e,t,n,r,c,o,s){try{var a=e[o](s),i=a.value}catch(e){return void n(e)}a.done?t(i):Promise.resolve(i).then(r,c)}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){f(e,t,n[t])})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _={name:"receptive",uri:"events/{events.selected.id}/receptive",isForm:!0},C={props:["mode"],mixins:[o.a,d,s.a,l.a,p.a],components:{QrcodeStream:v.QrcodeStream,QrcodeDropZone:v.QrcodeDropZone,QrcodeCapture:v.QrcodeCapture},data:function(){return{service:_,result:"",noStreamApiSupport:!1,inv:"",qrCodeError:null}},computed:h({},Object(a.mapState)({checkedIn:function(e){return e.receptive.checkedIn}})),methods:h({},Object(a.mapActions)(_.name,["selectInvitation"]),{confirmCheckin:function(e){var t=this;null==e.checkin_at?confirm("Deseja realizar o check-in de "+e.person_institution.person.name+"?",this).then(function(n){n&&t.makeCheckin(e.uuid)}):showMessage("Este convidado já fez check-in no evento",this)},makeCheckin:function(e){return this.$store.dispatch("receptive/makeCheckin",e)},onDecode:function(e){return this.makeCheckin(e)},onInit:function(){var e,t=(e=c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),"NotAllowedError"===e.t0.name?this.qrCodeError="ERROR: you need to grant camera access permisson":"NotFoundError"===e.t0.name?this.qrCodeError="ERROR: no camera on this device":"NotSupportedError"===e.t0.name?this.qrCodeError="ERROR: secure context required (HTTPS, localhost)":"NotReadableError"===e.t0.name?this.qrCodeError="ERROR: is the camera already in use?":"OverconstrainedError"===e.t0.name?this.qrCodeError="ERROR: installed cameras are not suitable":"StreamApiNotSupportedError"===e.t0.name&&(this.qrCodeError="ERROR: Stream API is not supported in this browser");case 8:case"end":return e.stop()}},e,this,[[0,5]])}),function(){var t=this,n=arguments;return new Promise(function(r,c){var o=e.apply(t,n);function s(e){b(o,r,c,s,a,"next",e)}function a(e){b(o,r,c,s,a,"throw",e)}s(void 0)})});return function(e){return t.apply(this,arguments)}}(),getCheckedIn:function(){return this.$store.state.receptive.checkedIn},clearCheckedIn:function(){return this.$store.commit("receptive/clearCheckedIn")},getCheckedInTime:function(e){return Object(m.format)(Object(m.parse)(e.checkin_at),"HH[h]mm")},firstLast:function(e){return first_last(e)}}),mounted:function(){this.$store.dispatch("receptive/load")}},g=n("KHd+"),k=Object(g.a)(C,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.can("receptive")?n("div",[n("div",{staticClass:"py-2 text-center"},[n("h3",[e._v(e._s(e.events.selected.name))])]),e._v(" "),e.getCheckedIn().data?n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[e.getCheckedIn()&&e.getCheckedIn().data?n("div",{staticClass:"text-center"},[n("h4",{staticClass:"text-center"},[e._v("\n                    "+e._s(e.getCheckedIn().data.person_institution.person.name)+"\n                ")]),e._v(" "),n("h6",{staticClass:"text-center"},[e._v("\n                    "+e._s(e.getCheckedIn().data.person_institution.role.name)+"\n                ")]),e._v(" "),n("h6",{staticClass:"text-center"},[e._v("\n                    "+e._s(e.getCheckedIn().data.person_institution.institution.name)+"\n                ")]),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"badge text-white mb-4 pt-2 pb-3 pl-5 pr-5",style:{"background-color":e.getCheckedIn().data.sub_event.sector?e.getColor(e.getCheckedIn().data.sub_event.sector.color,0):"",color:e.getColor(e.getCheckedIn().data.sub_event.sector.color,1),"text-transform":"uppercase"}},[n("h3",{staticClass:"mb-0"},[e._v("\n                        "+e._s(e.getCheckedIn().data.sub_event.sector?e.getCheckedIn().data.sub_event.sector.name:"")+"\n                    ")]),e._v(" "),n("br"),e._v("\n\n                    "+e._s(e.getCheckedIn().data.sub_event.place)+"\n                ")]),e._v(" "),n("img",{staticClass:"img-thumbnail rounded mx-auto d-block mb-2",attrs:{src:e.getCheckedIn().data.person_institution.person.photoUrl,width:"200",height:"200"}}),e._v(" "),n("h2",{staticClass:"text-center"},[e._v(e._s(e.getCheckedIn().data.code))]),e._v(" "),n("br"),e._v(" "),n("div",{class:"btn btn-lg btn-block "+(e.getCheckedIn().success?"btn-success":"btn-danger"),domProps:{innerHTML:e._s(e.getCheckedIn().errors?e.checkedIn.errors:"Check-in feito com sucesso!")},on:{click:function(t){return e.clearCheckedIn()}}})]):e._e()])]):e._e(),e._v(" "),e.getCheckedIn().data?e._e():n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"card card-block bg-faded"},[n("div",{staticClass:"row"},[e.receptive.data.statistics?n("div",{staticClass:"col-6 text-center"},[e._v("\n                        confirmados:\n                        "+e._s(e.receptive.data.statistics.confirmed)+"\n                    ")]):e._e(),e._v(" "),e.receptive.data.statistics?n("div",{staticClass:"col-6 text-center"},[e._v("\n                        ingressaram:\n                        "+e._s(e.receptive.data.statistics.totalcheckedin)+"\n                    ")]):e._e()])])]),e._v(" "),n("div",{staticClass:"col-sm-12 col-md-6"},[n("app-table-panel",{attrs:{title:"Leitura QRCode"}},[n("div",{staticClass:"m-4"},[n("qrcode-drop-zone",{on:{decode:e.onDecode}},[n("qrcode-stream",{on:{decode:e.onDecode,init:e.onInit}})],1),e._v(" "),e.noStreamApiSupport?n("qrcode-capture",{on:{decode:e.onDecode}}):e._e()],1),e._v("\n\n                "+e._s(e.qrCodeError)+"\n            ")])],1),e._v(" "),n("div",{staticClass:"col-sm-12 col-md-6"},[n("app-table-panel",{attrs:{title:"Convidados","per-page":e.perPage,"filter-text":e.filterText},on:{"input-filter-text":function(t){e.filterText=t.target.value},"set-per-page":function(t){e.perPage=t}}},[n("app-table",{attrs:{pagination:e.receptive.data.links.pagination,columns:["Convite",{title:"Setor",trClass:"text-center"},"Convidado",{title:"Check-in",trClass:"text-center"},{title:"Foto",trClass:"text-center"}]},on:{"goto-page":function(t){return e.gotoPage(t)}}},e._l(e.receptive.data.rows,function(t){return n("tr",{staticClass:"cursor-pointer",on:{click:function(n){return e.confirmCheckin(t)}}},[n("td",{staticClass:"align-middle text-center"},[e._v("\n                            "+e._s(t.code)+"\n                        ")]),e._v(" "),n("td",{staticClass:"align-middle text-center"},[n("span",{staticClass:"badge text-white p-2",style:{"background-color":t.sub_event.sector?e.getColor(t.sub_event.sector.color,0):"",color:e.getColor(t.sub_event.sector.color,1),"text-transform":"uppercase"}},[e._v("\n                                "+e._s(t.sub_event.sector?t.sub_event.sector.name:"")+"\n                            ")])]),e._v(" "),n("td",{staticClass:"align-middle"},[n("strong",[e._v(e._s(t.person_institution.person.name))]),e._v(" "),n("br"),e._v("\n\n                            "+e._s(t.sub_event.name)),n("br")]),e._v(" "),n("td",{staticClass:"align-middle text-center"},[n("h6",{staticClass:"mb-0"},[t.checkin_at?n("div",[n("span",{staticClass:"badge badge-success"},[e._v(e._s(e.getCheckedInTime(t)))]),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"text-sm"},[n("small",[e._v(e._s(e.firstLast(t.checked_in_by.name)))])])]):e._e(),e._v(" "),t.checkin_at?e._e():n("span",{staticClass:"badge badge-danger"},[e._v("não")])])]),e._v(" "),n("td",{staticClass:"align-middle text-center"},[n("img",{staticClass:"img-thumbnail rounded mx-auto d-block mb-2",attrs:{src:t.person_institution.person.photoUrl,width:"50",height:"50"}})])])}),0)],1)],1)])]):e._e()},[],!1,null,null,null);t.default=k.exports}}]);