(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"8lMk":function(e,t,a){"use strict";a.r(t);var i=a("jx1L"),r=a("L2JU");function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),i.forEach(function(t){c(e,t,a[t])})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o={methods:s({},Object(r.mapActions)("categorizables",["clearForm"])),computed:s({},Object(r.mapState)({people:function(e){return e.people},categorizables:function(e){return e.categorizables}}))},n=a("CtO9"),l={name:"categorizables",uri:"people/{people.selected.id}/categories/categorizables"},g={props:["mode"],mixins:[i.a,o,n.a],data:function(){return{service:l,categorizablesChecked:{},checkedCategory:{}}},computed:{categorizablesFilterText:{get:function(){return this.$store.state.categorizables.data.filter.text},set:function(e){return this.$store.dispatch(this.service.name+"/mutateSetQueryFilterText",e)}},categorizablesPerPage:{get:function(){return this.$store.state.categorizables.data.links.pagination.per_page},set:function(e){return this.$store.dispatch("categorizables/setPerPage",e)}}},methods:{categorizablesGotoPage:function(e){this.gotoPage(e,"categorizables",this.categorizables.data.links.pagination)},isChecked:function(e){return!!this.checkedCategory.hasOwnProperty(e.id)&&this.checkedCategory[e.id].checked},toggleCheck:function(e){this.checkedCategory.hasOwnProperty(e.id)||(this.checkedCategory[e.id]={id:e.id,checked:!1}),this.checkedCategory[e.id].checked=!this.checkedCategory[e.id].checked,this.categorizablesChecked=this.getCategorizablesChecked()},categorize:function(){var e={personId:this.people.selected.id,categories:this.categorizablesChecked};this.$store.dispatch("categorizables/categorize",e),this.$router.go(-1)},getCategorizablesChecked:function(){return _.filter(this.checkedCategory,function(e){return e.checked})}}},d=a("KHd+"),u=Object(d.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"py-2 text-center"},[a("h1",[e._v(e._s(e.people.selected.name))]),e._v(" "),a("h2",[e._v("Associar Categorias a Pessoas")])]),e._v(" "),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-6"},[e.categorizables.data.links?a("app-table-panel",{attrs:{title:"Categorias","per-page":e.categorizablesPerPage,"filter-text":e.categorizablesFilterText},on:{"set-per-page":function(t){e.categorizablesPerPage=t},"input-filter-text":function(t){e.categorizablesFilterText=t.target.value}}},[a("template",{slot:"buttons"},[e.categorizablesChecked.length>0?a("button",{staticClass:"btn btn-primary btn-sm pull-right",attrs:{dusk:"associate-category-dusk",disabled:e.cannot("people:modify")},on:{click:function(t){return e.categorize()}}},[e._v("\n                        associar categorias\n                    ")]):e._e()]),e._v(" "),a("app-table",{attrs:{pagination:e.categorizables.data.links.pagination,columns:["#","","Nome"]},on:{"goto-page":function(t){return e.categorizablesGotoPage(t)}}},e._l(e.categorizables.data.rows,function(t){return a("tr",{class:{"cursor-pointer":!0,"bg-primary-lighter text-white":e.isCurrent(t,e.categorizables.selected)}},[a("td",{staticClass:"align-middle"},[e._v(e._s(t.id))]),e._v(" "),a("td",{staticClass:"align-middle"},[a("input",{attrs:{type:"checkbox",dusk:"select-category-dusk"},domProps:{checked:e.isChecked(t)},on:{input:function(a){return e.toggleCheck(t)}}})]),e._v(" "),a("td",{staticClass:"align-middle"},[e._v("\n                            "+e._s(t.name)+"\n                        ")])])}),0)],2):e._e()],1)])])},[],!1,null,null,null);t.default=u.exports}}]);